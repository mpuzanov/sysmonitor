syntax = "proto3";

import "google/protobuf/timestamp.proto";

package api;
option go_package = "api";

// запрос к серверу от клиента
message Request {
    // промежуток времени выдачи информации (в секундах) 
    int32 timeout = 1;
    // период времени за который выдавать информацию (в секундах)
    int32 period = 2;
}

message SystemResponse {
    // время выдачи информации
    google.protobuf.Timestamp query_time = 1; 
    // средняя загрузка системы
    double system_load_value = 2;
}

// средняя загрузка CPU
message CPUResponse {
    google.protobuf.Timestamp query_time = 1;
    double user_mode = 2;
    double system_mode = 3;
    double idle = 4;
}

message Result {
    SystemResponse system_val = 1;
    CPUResponse cpu_val = 2;
}


service Sysmonitor {    
  rpc SysInfo(Request) returns (stream Result) {}   
}